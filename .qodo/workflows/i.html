<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snack Corner</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:Poppins;background:linear-gradient(135deg,#fff8e1,#fff);}
.container{max-width:1200px;margin:auto;padding:1rem;}
button{cursor:pointer;transition:.3s;}button:active{transform:scale(0.95);}
.btn{padding:.6rem 1.2rem;border:none;border-radius:12px;font-weight:600;}
.primary{background:#2e7d32;color:#fff;}
.danger{background:#e53935;color:#fff;}
#menu,#cart,#admin{display:none;}
.top-icons{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;}
.top-left-icons,.top-right-icons{display:flex;gap:1rem;align-items:center;}
.cart-icon{font-size:2rem;color:#2e7d32;position:relative;}
.cart-count{position:absolute;top:-8px;right:-10px;background:#e53935;color:#fff;font-size:12px;padding:2px 6px;border-radius:50%;}
.contact-icon{font-size:1.8rem;color:#2e7d32;background:#fff;border-radius:50%;width:50px;height:50px;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 8px rgba(0,0,0,0.1);transition:.25s;text-decoration:none;}
.contact-icon:hover{transform:scale(1.1);background:#e8f5e9;}
.menu-title{text-align:center;font-family:'Pacifico',cursive;font-size:2.8rem;color:#d84315;margin:1rem 0;}
.food-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;justify-items:center;} /* center all food cards */
.food-card{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,.1);display:flex;flex-direction:column;transition:.3s;width:220px;text-align:center;align-items:center;} 
.food-card:hover{transform:translateY(-5px);box-shadow:0 12px 25px rgba(0,0,0,.2);} /* hover effect */
.food-card img{width:100%;height:180px;object-fit:cover;background:#f0f0f0;}
.food-info{padding:1rem;display:flex;flex-direction:column;gap:.5rem;text-align:center;align-items:center;}
.food-info b{font-size:1.3rem;color:#d84315;}
.price{font-size:1.2rem;color:#2e7d32;font-weight:700;}
.in{color:#2e7d32;font-weight:600;}
.out{color:#c62828;font-weight:600;}
input{width:100%;padding:.7rem;margin:.3rem 0;border-radius:10px;border:1px solid #ddd;}
#adminContent{margin-top:1.5rem;border-top:2px solid #eee;padding-top:1rem;}
.stock-btn{width:100%;padding:.5rem;border:none;border-radius:10px;color:#fff;font-weight:600;margin-top:4px;}
.stock-btn.in{background:#2e7d32;}
.stock-btn.out{background:#c62828;}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:.8rem;border-bottom:1px solid #eee;}
.running-text{overflow:hidden;white-space:nowrap;margin:1rem 0;background:#f0f0f0;padding:.5rem;border-radius:10px;}
.running-text span{display:inline-block;animation:runText 15s linear infinite;}
@keyframes runText{0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
@media(max-width:768px){.menu-title{font-size:2.2rem;}.contact-icon,.cart-icon{width:45px;height:45px;font-size:1.5rem;}}
</style>
</head>
<body>

<div class="container">

<!-- Welcome Page -->
<div id="welcome" style="display:block;text-align:center;margin-top:20vh;">
    <div class="title" style="font-family:'Pacifico',cursive;font-size:3rem;color:#d84315;">Welcome to Snack Corner</div>
    <p style="margin-bottom:2rem;">Delicious snacks delivered to you!</p>
    <button class="btn primary" onclick="show('menu')">Explore Menu</button>
</div>

<!-- Menu Page -->
<div id="menu">
    <div class="top-icons">
        <div class="top-left-icons">
            <a href="tel:09779525371" class="contact-icon" title="Call / KPay"><i class="fas fa-phone"></i></a>
            <a href="https://t.me/shweyi" target="_blank" class="contact-icon" title="Message on Telegram"><i class="fab fa-telegram-plane"></i></a>
        </div>
        <div class="top-right-icons">
            <div style="position:relative;">
                <i class="fas fa-shopping-cart cart-icon" onclick="show('cart')"></i>
                <span class="cart-count" id="cartCount">0</span>
            </div>
            <i class="fas fa-user-cog cart-icon" onclick="show('admin')"></i>
        </div>
    </div>

    <div class="menu-title">Our Items</div>
    <div id="runningText" class="running-text" style="display:none;"><span id="runningTextContent"></span></div>
    <div class="food-grid" id="foodList">Loading items...</div>
</div>

<!-- Cart Page -->
<div id="cart">
    <div class="top-icons">
        <i class="fas fa-arrow-left cart-icon" onclick="show('menu')"></i>
    </div>
    <h3>Your Order</h3>
    <div id="cartItems"></div>
    <h4 style="margin:1rem 0;">Total: $<span id="totalPrice">0.00</span></h4>
    <input id="name" placeholder="Your Name">
    <input id="hostel" placeholder="Hostel / Room">
    <input id="phone" placeholder="Phone Number">
    <button class="btn primary" style="width:100%;margin-top:1rem;" onclick="placeOrder()">Place Order</button>
</div>

<!-- Admin Panel -->
<div id="admin">
    <div class="top-icons">
        <i class="fas fa-arrow-left cart-icon" onclick="show('menu')"></i>
    </div>
    <h3>Admin Panel</h3>
    <div id="loginArea">
        <input id="adminPass" type="password" placeholder="Enter Admin Password">
        <button class="btn primary" onclick="login()">Login</button>
    </div>
    <div id="adminContent" style="display:none;">
        <h4>Add New Product</h4>
        <input id="newName" placeholder="Product Name">
        <input id="newPrice" type="number" placeholder="Price">
        <input id="newImg" type="file" accept="image/*">
        <button class="btn primary" onclick="addFood()" id="addBtn">Upload & Add Product</button>

        <h4 style="margin-top:2rem;">Manage Inventory</h4>
        <div class="food-grid" id="adminFood"></div>

        <!-- Running Text / Announcements moved UNDER food adding -->
        <h4 style="margin-top:2rem;">Running Text / Announcements</h4>
        <input id="runningInput" placeholder="Type announcement">
        <button class="btn primary" onclick="addRunningText()">Add</button>
        <div class="food-grid" id="runningList"></div>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
import { getFirestore, collection, onSnapshot, addDoc, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAcC--9gqyvSKgNJgXn8PxhUZkNANkgEFY",
  authDomain: "shwe-yi-win23.firebaseapp.com",
  projectId: "shwe-yi-win23",
  storageBucket: "shwe-yi-win23.firebasestorage.app",
  appId: "1:358130981782:web:6afb45eb96eb7"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const foodCol = collection(db, 'foods');
const runningCol = collection(db, 'runningText');

const ADMIN_PASSWORD = "admin123";
const TELEGRAM_BOT_TOKEN = "YOUR_TELEGRAM_BOT_TOKEN";
const TELEGRAM_CHAT_ID = "YOUR_CHAT_ID";

let cart = [], adminListener = null;

window.show = (id) => {
    document.querySelectorAll('#welcome,#menu,#cart,#admin').forEach(el=>el.style.display='none');
    document.getElementById(id).style.display='block';
    if(id==='menu') renderMenu();
};

function renderMenu(){
    const container = document.getElementById('foodList');
    const q = query(foodCol, orderBy('inStock','desc'));
    onSnapshot(q, snap=>{
        container.innerHTML='';
        snap.forEach(d=>{
            const f=d.data();
            const card=document.createElement('div');
            card.className='food-card';
            card.innerHTML=`
                <img src="${f.img||'https://via.placeholder.com/300x180'}" alt="${f.name}">
                <div class="food-info">
                    <b>${f.name}</b>
                    <div class="price">$${Number(f.price).toFixed(2)}</div>
                    <div class="${f.inStock?'in':'out'}">${f.inStock?'In Stock':'Out of Stock'}</div>
                    ${f.inStock?`<button class="btn primary" onclick="addToCart('${d.id}','${f.name}',${f.price})">Add to Cart</button>`:''}
                </div>`;
            container.appendChild(card);
        });
        renderRunningText();
    });
}

window.addToCart=(id,name,price)=>{cart.push({id,name,price});updateCartUI();}
function updateCartUI(){
    document.getElementById('cartCount').textContent=cart.length;
    const list=document.getElementById('cartItems');let total=0;list.innerHTML='';
    cart.forEach((item,idx)=>{total+=Number(item.price);list.innerHTML+=`
        <div class="cart-item"><span>${item.name} - $${item.price}</span>
        <button class="btn danger" onclick="removeFromCart(${idx})">X</button></div>`});
    document.getElementById('totalPrice').textContent=total.toFixed(2);
}
window.removeFromCart=(idx)=>{cart.splice(idx,1);updateCartUI();}

// Admin, running text, addFood, saveItem, toggleStock, placeOrder same as your previous code
show('welcome');
</script>
</body>
</html>
